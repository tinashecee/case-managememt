<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>NUST ProLegal Cases</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
    <link rel="stylesheet" href="https://rawcdn.githack.com/Loopple/loopple-public-assets/ad60f16c8a16d1dcad75e176c00d7f9e69320cd4/argon-dashboard/css/nucleo/css/nucleo.css">
    <link rel="stylesheet" href="/css/theme.css">
    <link rel="stylesheet" href="/css/loopple/loopple.css">
</head>

<body class="g-sidenav-show">
    <nav class="sidenav navbar navbar-vertical fixed-left navbar-expand-xs navbar-light bg-white loopple-fixed-start" id="sidenav-main">
      <div class="sidenav-header text-left" >
          <a    href="/">
              <img src="/img/logo.png"  
              width="96" 
              style="display: block; margin: auto" alt="...">
          </a>
      </div>
      <div class="navbar-inner">
          <div class="collapse navbar-collapse" id="sidenav-collapse-main">
              <ul class="navbar-nav">
                  <li class="nav-item">
                      <a class="nav-link active" href="/">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-desktop text-primary"></i>
                          </div>
                          <span class="nav-link-text">Dashboard</span>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/lawfirms">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-globe text-info"></i>
                          </div>
                          <span class="nav-link-text">Law Firms&nbsp;</span>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/budget">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-map-marker text-warning"></i>
                          </div>
                          <span class="nav-link-text">Budget&nbsp;</span>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/compliance">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-table text-dark"></i>
                          </div>
                          <span class="nav-link-text">Compliance</span>
                      </a>
                  </li>
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="contractsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-lock text-danger"></i>
                          </div>
                          <span class="nav-link-text">Contracts</span>
                      </a>
                      <div class="dropdown-menu" aria-labelledby="contractsDropdown">
                          <a class="dropdown-item" href="/vendors">Vendors</a>
                          <a class="dropdown-item" href="/contracts">Contracts</a>
                      </div>
                  </li>

                  <li class="nav-item">
                      <a class="nav-link" href="/cases">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-key text-success"></i>
                          </div>
                          <span class="nav-link-text">Cases</span>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="https://soxfort.com/learn" target="_blank">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-gift text-dark"></i>
                          </div>
                          <span class="nav-link-text">Learn</span>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/resources">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-tag text-primary"></i>
                          </div>
                          <span class="nav-link-text">Legal Resources</span>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/tasks">
                          <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                              <i class="fa fa-tag text-primary"></i>
                          </div>
                          <span class="nav-link-text">Tasks</span>
                      </a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="contractsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="rounded-circle avatar-xs text-center bg-light py-2 px-1 mr-3 d-flex align-items-center justify-content-center">
                            <i class="fa fa-lock text-danger"></i>
                        </div>
                        <span class="nav-link-text">Settings</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="contractsDropdown">
                        <a class="dropdown-item" href="/settings/users">Users</a>
                        <a class="dropdown-item" href="/settings/user-roles">Users Roles</a>
                        <a class="dropdown-item" href="/settings/departments">Departments</a>
                        <a class="dropdown-item" href="/settings/case-status">Case Status</a>
                    </div>
                </li>
              </ul>

          </div>
      </div>
  </nav>
  <div class="main-content" id="panel">
    <nav class="navbar navbar-top navbar-expand navbar-dark bg-primary border-bottom" id="navbarTop">
      <div class="container-fluid">
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <form class="navbar-search navbar-search-light form-inline mr-sm-3 mb-0" id="navbar-search-main">
               
                  <button type="button" class="close" data-action="search-close" data-target="#navbar-search-main" aria-label="Close">
                      <span aria-hidden="true">x</span>
                  </button>
              </form>
              <ul class="navbar-nav align-items-center  ml-md-auto ">
                  <li class="nav-item d-xl-none">
                      <div class="pr-3 sidenav-toggler sidenav-toggler-dark active" data-action="sidenav-pin" data-target="#sidenav-main">
                          <div class="sidenav-toggler-inner">
                              <i class="sidenav-toggler-line"></i>
                              <i class="sidenav-toggler-line"></i>
                              <i class="sidenav-toggler-line"></i>
                          </div>
                      </div>
                  </li>
                  <li class="nav-item d-sm-none">
                      <a class="nav-link" href="#" data-action="search-show" data-target="#navbar-search-main">
                          <i class="ni ni-zoom-split-in"></i>
                      </a>
                  </li>
                
              </ul>
              <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
                  <li class="nav-item dropdown">
                      <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <div class="media align-items-center">
                              <span class="avatar avatar-sm rounded-circle">
                                  <img alt="Image placeholder" src="/img/user.png">
                              </span>
                              <div class="media-body  ml-2  d-none d-lg-block">
                                  <span class="mb-0 text-sm  font-weight-bold"><%= user %></span>
                              </div>
                          </div>
                      </a>
                      <div class="dropdown-menu dropdown-menu-right">
                          <div class="dropdown-header noti-title">
                              <h6 class="text-overflow m-0">Welcome!</h6>
                          </div>
                          <a href="#!" class="dropdown-item">
                              <i class="fa fa-user"></i>
                              <span>My profile</span>
                          </a>
                          <a href="#!" class="dropdown-item">
                              <i class="fa fa-tools"></i>
                              <span>Settings</span>
                          </a>
                          <a href="#!" class="dropdown-item">
                              <i class="far fa-calendar"></i>
                              <span>Activity</span>
                          </a>
                          <a href="#!" class="dropdown-item">
                              <i class="fa fa-phone"></i>
                              <span>Support</span>
                          </a>
                          <div class="dropdown-divider"></div>
                          <a href="/users/logout" class="dropdown-item">
                              <i class="fa fa-sign-out-alt"></i>
                              <span>Logout</span>
                          </a>
                      </div>
                  </li>
              </ul>
          </div>
      </div>
  </nav>
    <%- body %>
    </div>
    <script src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/jquery.min.js"></script>
    <script src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/js.cookie.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
    <script src="https://rawcdn.githack.com/Loopple/loopple-public-assets/5cef8f62939eeb089fa26d4c53a49198de421e3d/argon-dashboard/js/vendor/chart.extension.js"></script>
    <script src="https://rawcdn.githack.com/Loopple/loopple-public-assets/7bb803d2af2ab6d71d429b0cb459c24a4cd0fbb4/argon-dashboard/js/argon.min.js"></script>
    <script src="/js/loopple/loopple.js"></script>
    <script>
       /*  var input = document.getElementById('searchInput');
var table = document.getElementById('table');

// Add event listener to input
input.addEventListener('input', function() {
  filterTableRows(input.value);
});

// Function to filter table rows
function filterTableRows(filter) {
  // Get all table rows from the tbody element
  var rows = table.getElementsByTagName('tr');

  // Loop through all rows, starting from index 1 (skip the header row)
  for (var i = 1; i < rows.length; i++) {
    var row = rows[i];
    var shouldDisplay = false;

    // Loop through all cells in the row
    for (var j = 0; j < row.cells.length; j++) {
      var cell = row.cells[j];
      var cellText = cell.textContent || cell.innerText;

      // Check if the cell text contains the filter value
      if (cellText.toLowerCase().indexOf(filter.toLowerCase()) > -1) {
        shouldDisplay = true;
        break;
      }
    }

    // Set the display style of the row based on the filter
    row.style.display = shouldDisplay ? '' : 'none';
  }
}*/
var input = document.getElementById('searchInput');
var table = document.getElementById('table');

// Add event listener to input
input.addEventListener('input', function () {
  filterTableRows(input.value);
});

// Function to filter table rows
function filterTableRows(filter) {
  // Make an AJAX request to the server to fetch filtered data
  var xhr = new XMLHttpRequest();
  xhr.open('GET', '/cases?filter=' + encodeURIComponent(filter));
  xhr.onload = function () {
    if (xhr.status === 200) {
      var response = JSON.parse(xhr.responseText);
      updateTableRows(response.data);
    }
  };
  xhr.send();
}

// Function to update table rows with the filtered data
function updateTableRows(data) {
  var rows = table.getElementsByTagName('tr');

  // Hide all rows except the header row
  for (var i = 1; i < rows.length; i++) {
    rows[i].style.display = 'none';
  }

  // Display only the rows that match the filter
  for (var j = 0; j < data.length; j++) {
    var caseId = data[j].case_id;
    var row = table.querySelector('tr[data-case-id="' + caseId + '"]');
    if (row) {
      row.style.display = '';
    }
  }
}
function togglePagination() {
  const toggleButton = document.getElementById('toggleButton');
  const tableContainer = document.getElementById('tableContainer');
  const pagination = document.querySelector('.pagination');

  // Check if the table container has a CSS class indicating pagination is enabled
  const isPaginated = tableContainer.classList.contains('paginated');

  if (isPaginated) {
    // Remove the paginated class to show all rows
    tableContainer.classList.remove('paginated');
    pagination.style.display = 'none';
    toggleButton.textContent = 'Enable Pagination';

    // Update the URL query parameter to show all rows
    history.replaceState(null, '', updateQueryParam('showAll', true));
  } else {
    // Add the paginated class to enable pagination
    tableContainer.classList.add('paginated');
    pagination.style.display = 'block';
    toggleButton.textContent = 'Disable Pagination';

    // Update the URL query parameter to enable pagination
    history.replaceState(null, '', updateQueryParam('showAll', false));
  }

  // Reload the page with the updated query parameter
  window.location.href = window.location.href;
}

function updateQueryParam(key, value) {
  const url = new URL(window.location.href);
  url.searchParams.set(key, value);
  return url.toString();
}


    </script>
</body>